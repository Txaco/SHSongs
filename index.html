<!DOCTYPE html>

<html lang="es">

	<head>

		<title>SHS-TEST</title>
		<meta charset="utf-8" />
		<script>
			
const APP = (() => {

	const dict = [];

	const defaults = {

		page: 1,
		pageSize: 100,
		format: 'json'

	};

	const SHS = {

		data: {
			homepage: {
				spotlight: {
					cover: '<performance Object>',
					original: '<performance Object>'
				}
			},
			performance: {
				entityType: 'performance',
				entitySubType: 'recording',
				uri: 'https://secondhandsongs.com/performance/<ID>',
				title: '',
				performer: '<performer Object>',	// Only lookup
				isOriginal: ['true','false'],	// Only lookup
				date: 'YYYY-MM-DD',	// Only lookup
				releases: ['<release Object>', '... etc.'],	// Only lookup
				works: ['<work Object>', '... etc.'],	// Only lookup. Performed work Object list. Usually 1 item, except for medleys !!!
				originals: ['<work Object>', '... etc.'],	// Only lookup. Only for covers. Original work performance Object List.
															// Each work has an "original" attribute with the original performace Object
															// and an "isRootWork" attribute, "true" for non-adaptations
				covers: ['<performance Object>', '... etc.'],	// Only lookup. Only for originals. Cover performance Object list
				sampledBy: ['<performance String>', '... etc.'],	// Only lookup. Samlped Performance String list, with comments
				usesSamplesFrom: ['<performance String>', '... etc.'],	// Only lookup. Sampled-by-this Performance String list, with comments
				derivedWorks: ['<work Object>', '... etc.'],	// Only lookup. Only for covers. Derived-from work list
				external_uri: ['youtube-video-uri', '... etc.']	// Only lookup. Youtube video uri list
			},
			performer: {
				uri: 'https://secondhandsongs.com/artist/<ID>',
				name: '',
				isOriginal: ['true','false'],
				artist: ''	// Only lookup. Omitted when obvious
			},
			picture: {
				entityType: 'picture'
			},
			relation: {
				relationName: '',
				artist: '<artist Object>',
				comments: ''
			},
			artist: {
				entityType: 'artist',
				entitySubType: ['person','group',null],
				uri: 'https://secondhandsongs.com/artist/<ID>',
				commonName: '',
				picture: '<picture Object>',	// Only lookup
				birthDate: 'YYYY-MM-DD',	// Only lookup
				deathDate: 'YYYY-MM-DD',	// Only lookup
				homeCountry: '',	// Only lookup
				comments: '',	// Only lookup
				aliases: ['','... etc.'],	// Only lookup
				relations: ['<relation Object>', '... etc.'],	// Only lookup
				members: ['<artist Object>', '... etc.'],	// 	Only lookup. Only for entityType = 'joint-artist' !!!
				performances: ['<performance Object>', '... etc.'],	// Only lookup
				creditedWorks: ['<work Object>', '... etc.'],	// Only lookup
				releases: ['<release Object>', '... etc.']	// Only lookup
			},
			work: {
				entityType: ['song','poem','film','proza'],
				title: '',
				language: '',
				credits: ['<artist Object>', '... etc.'],	// Credited artist Object list
				originalCredits: ['<artist Object>', '... etc.'],	// For the original work this is based on. Credited artist Object list
				original: '<performance Object>',	// Original performance
				basedOn: ['<work Object>', '... etc.'],	// For the original works this is based on. Work Object list
				derivedWorks: ['<work Object>', '... etc.'],	// For this work's derived works. Work Object list
				versions: ['<performance Object>', '... etc.'],	// For this work's version performances. Performance Object list
			},
			release: {
				entityType: ['audio album','audio single','audio EP','internet','video'],
				title: '',
				type: ['7"','CD','Tape','???'],	// More specific than "entityType"
				date: 'YYYY-MM-DD',
				label: '<label Object>',	// Release label Object
				catalogNr: '<STR-NUMBER>',
				ean: '<EAN-CODE>',
				picture: '<picture Object>',
				tributes: ['<artist Object>', '... etc.'],	// Tributed artist Object list
				performances: ['<performance Object>', '... etc.'],	// Trlease track performance Object list
				external_uri: '<STR-DISCOGS-URI>'
			},
			label: {
				entityType: 'label',
				name: ''
			},
			object: {
				entityName: ['audio single','... etc.'],	// Specific data type (e.g: 'audio single' for a release, etc.)
				uri: 'STR-URI',	// Resource's API uri
				external_uri: ['STR-URI','... etc.']	// Resource's external uri list (optional)
			}
		},
		endpoint: 'https://secondhandsongs.com/',
		search_parameters: {
			common: [`&page=${defaults.page}`, `&pageSize=${defaults.pageSize}`, `&format=${defaults.format}`],
			work: [`?title=`, `&credits=`],
			performance: [`?title=`, `&performer=`, `&date=`],
			artist: [`?commonName=`],
			object: [`?caption=`],
			get_parameters(target, input, options) {

				let parameters = this[target][0] + input;

				if(options) {

					if(target === 'work' && options.credits) parameters += this[target][1] + options.credits;
					else if(target === 'performance') {

						if(options.performer) parameters += this[target][1] + options.performer;
						if(options.date) parameters += this[target][2] + options.date;

					}

				}

				parameters += this.common.join('');

				return parameters;
			}
		},

		search(target, input, options) {

			let parameters = this.search_parameters.get_parameters(target, input, options);

			let uri = this.endpoint + 'search/' + target + parameters;

			return this.request(uri);

		},

		request(uri) {
			
			let options = {
				headers: {
					'origin': 'true'
				}
			};

			return window.fetch(uri).then(results => console.log(results));

		}

	};

	SHS.search('object', 'blackbird');

})();

		</script>

	</head>

	<body></body>

</html>
